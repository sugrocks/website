{% extends "layout-rss.xml" %}
{% from "helper.xml" import rss_item %}
{% block feed_self %}https://sug.rocks/threads.rss{% endblock %}
{% block feed_title %}Last /sug/ threads{% endblock %}
{% block feed_description %}The latest /sug/ threads found on /co/ and /trash/{% endblock %}
{% block feed_link %}https://sug.rocks/{% endblock %}
{% block feed_title_image %}Last /sug/ threads{% endblock %}
{% block feed_link_image %}https://sug.rocks/{% endblock %}
{% block feed_items %}
{% for thread in threadlist %}
{% set title %}[/{{ thread._board.name }}/] {{ thread.topic.comment|edition }} (No.{{ thread.topic.post_number }}){% endset %}
{% set content %}{% if thread.topic.file.file_deleted == True %}
                    <a href="{{ thread.url }}" target="_blank"><img src="https://sug.rocks/img/filedeleted.gif" alt="File was deleted :("></a>
{% elif thread.topic.spoiler == True %}
                    [Image was spoilered]
{% else %}
                    <a href="{{ thread.url }}" target="_blank"><img src="https://proxy.sug.rocks/250x250,fit,q60/{{ thread.topic.file.file_url }}" title="Original: {{ thread.topic.file.filename_original }} ({{ thread.topic.file.file_width }}x{{ thread.topic.file.file_height }})" alt="{{ thread.topic.file.filename }}"></a>
{% endif %}
                    <br><hr><br>
                    {{ thread.topic.comment.replace('href="/', 'href="https://boards.4chan.org/')|urlify|inlinecss }}{% endset %}
{% set published %}{{ thread.topic.timestamp|rssdate }}{% endset %}
{% set guid %}{{ thread.url }}{% endset %}
{{ rss_item(title, content, guid, published) }}
{% endfor %}
{% endblock %}
